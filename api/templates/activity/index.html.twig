{% extends 'base.html.twig' %}

{% block title %}Activity index
{% endblock %}

{% block body %}
	<h1>Open Activities</h1>

	{% for activity in activities %}
		<div class="row row-cols-1 row-cols-md-3">
			<div class="col mb-4">
				<div
					class="card h-100">
					<!--Card image-->
					<div class="view overlay">
						<img class="card-img-top" src="https://mdbootstrap.com/img/Photos/Others/images/16.webp" alt="Card image cap" />
					</div>

					<!--Card content-->
					<div
						class="card-body">

						<!--Title-->
						<h4 class="card-title">{{ activity.name }}
							-
							{{ activity.date ? activity.date|date('Y-m-d') : '' }}</h4>
						<!--Text-->
						<p class="card-text">‚è∞{{ activity.startingTime ? activity.startingTime|date('H:i:s') : '' }}
							<br>{{ activity.description }}
							-
							<br>Organized by :
							{{ activity.owner.getUsername }}
							<br>
							with
							{{ activity.numberOfParticipants }}
							participants
						</p>
						<!-- Provides extra visual weight and identifies the primary action in a set of buttons -->
						<a href="{{ path('app_message', {'id': activity.id})}}" class="btn btn-light-blue btn-md">
                            Wanna join {{ activity.owner.getUsername }} ?
						</a>
						{% if app.user.id == activity.owner.id %}
							<a href="{{ path('app_activity_edit', {'id': activity.id}) }}">edit</a>
							<a href="{{ path('app_activity_show', {'id': activity.id}) }}">show</a>
						{% endif %}
					</div>
				</div>
			</div>
		</div>


	{% endfor %}

	{% for activity in activities %}
		<tr>
			<td>{{ activity.owner.getUsername() }}</td>
			<td>{{ activity.location}}</td>
			<td>{{ activity.name }}</td>
			<td>{{ activity.description }}</td>
			<td>{{ activity.duration }}</td>
			<td>{{ activity.date ? activity.date|date('Y-m-d') : '' }}</td>
			<td>{{ activity.startingTime ? activity.startingTime|date('H:i:s') : '' }}</td>
			<td>{{ activity.outdoor ? 'Yes' : 'No' }}</td>
			<td>{{ activity.image }}</td>
			<td>{{ activity.open ? 'Yes' : 'No' }}</td>
			<td>{{ activity.numberOfParticipants }}</td>

			<td>
				<a href="{{ path('app_message', {'id': activity.id})}}">contact</a>
			</td>
			{% if app.user.getUsername == activity.owner.getUsername %}
				<td>
					<a href="{{ path('app_activity_show', {'id': activity.id}) }}">show</a>
					<a href="{{ path('app_activity_edit', {'id': activity.id}) }}">edit</a>
				</td>
			{% endif %}
		</tr>
	{% else %}
		<tr>
			<td colspan="11">no records found</td>
		</tr>
	{% endfor %}
</tbody></table><a href="{{ path('app_activity_new') }}">Create new</a>{% endblock %}
